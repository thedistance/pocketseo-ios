# Master Pods Repo
source 'https://github.com/CocoaPods/Specs.git'

# Private Pods Repo
source 'git@bitbucket.org:thedistance/thedistancekit-cocoapods.git'

# pod configuration
platform :ios, '8.0'
inhibit_all_warnings!
use_frameworks!

# define
workspace '../MozQuito'
xcodeproj '../MozQuito'

target 'PocketSEO' do
    
    xcodeproj '../MozQuito'
    
    ### CORE PODS ###
    
    pod 'TheDistanceCore', :path => 'TheDistanceCore'
    pod 'ViperKit', :path => 'ViperKit'
    
    ### DISTRIBUTION PODS ###
    
    pod 'GoogleAnalytics'
    pod 'Fabric'
    pod 'Crashlytics'
    
    ### NETWORKING PODS ###
    
    pod 'Alamofire'
    pod 'SwiftyJSON'
    pod 'PSOperations', :git => 'git@github.com:joshc89/PSOperations.git'
    
    pod 'hpple'
    
    ### UI PODS ###
    
    pod 'JCPageViewController', :path => 'JCPageViewController'
    
    ### Josh's Development Pods ###
    
    pod 'JCLocalization', :git => 'git@bitbucket.org:joshcampion89/jclocalization.git'
    
    pod 'M13ProgressSuite', :git => 'https://github.com/Marxon13/M13ProgressSuite.git'
    pod 'StackView', :path => 'StackView'
    
end

target 'URLDetailsExtension' do
    
    xcodeproj '../MozQuito'
    
    ### CORE PODS ###
    
    pod 'TheDistanceCore', :path => 'TheDistanceCore'
    pod 'ViperKit', :path => 'ViperKit'
    
    ### DISTRIBUTION PODS ###
    
    pod 'GoogleAnalytics'
    pod 'Fabric'
    pod 'Crashlytics'
    
    ### NETWORKING PODS ###
    
    pod 'Alamofire'
    pod 'SwiftyJSON'
    pod 'PSOperations', :git => 'git@github.com:joshc89/PSOperations.git'
    
    pod 'hpple'
    
    ### UI PODS ###
    
    pod 'JCPageViewController', :path => 'JCPageViewController'
    
    ### Josh's Development Pods ###
    
    pod 'JCLocalization', :git => 'git@bitbucket.org:joshcampion89/jclocalization.git'
    
    pod 'M13ProgressSuite', :git => 'https://github.com/Marxon13/M13ProgressSuite.git'
    pod 'StackView', :path => 'StackView'
    
end

target 'PocketSEOTests' do
    
    xcodeproj '../MozQuito'
    
    pod 'AdvancedOperationKit', :git => 'git@bitbucket.org:joshcampion89/advancedoperationkit.git'
    pod 'ViperKit', :path => 'ViperKit'
    
end

## Add necesary macros for App Extensions

post_install do |installer_representation|
    installer_representation.pods_project.targets.each do |target|
        
        if target.name == "M13ProgressSuite"
            target.build_configurations.each do |config|
                s = config.build_settings['GCC_PREPROCESSOR_DEFINITIONS']
                s = [ '$(inherited)' ] if s == nil;
                s.push('M13_APP_EXTENSIONS=1')
                config.build_settings['GCC_PREPROCESSOR_DEFINITIONS'] = s
            end
        end
        
        if target.name == "TheDistanceCore"
            target.build_configurations.each do |config|
                s = config.build_settings['OTHER_SWIFT_FLAGS']
                s = [ '$(inherited)' ] if s == nil;
                s.push('"-DTD_APP_EXTENSION"')
                config.build_settings['OTHER_SWIFT_FLAGS'] = s
            end
        end
    end
end
